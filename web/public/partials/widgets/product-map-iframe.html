<!DOCTYPE html>
<html>
    <head>
        <title>product map</title>
        
        <style type="text/css">
            #map {
                height: 300px;
            }
        </style>
       <script src="http://maps.googleapis.com/maps/api/js?key=AIzaSyD-H5AvlatgN9nB8gXQvX64Gv7B0IaYyiE&libraries=places&sensor=false&language=es"></script>
        <!-- Tools -->
        <script src="/js/libs/markerwithlabel.js"></script>
        <script src="/js/mapstyles/omt.js"></script>     
        <script src="/js/libs/itinerarymap.js"></script>  
        <link href="/css/main.css?v=0.3" rel="stylesheet"/>

    <script type="text/javascript">

        // load markers dmcs location
        // 
        function fetchJSONFile(path, callback) {
            var httpRequest = new XMLHttpRequest();
            httpRequest.onreadystatechange = function() {
                if (httpRequest.readyState === 4) {
                    if (httpRequest.status === 200) {
                        var data = JSON.parse(httpRequest.responseText);
                        if (callback) callback(data);
                    }
                }
            };
            httpRequest.open('GET', path);
            httpRequest.send(); 
        }

        // this requests the file and executes a callback with the parsed result once
        //   it is available

        console.log(window.location.search);
        
        fetchJSONFile('/datamap/'+ window.location.search.replace("?code=", ""), function(data){
            // do something with your data
            initMap(data);
        });
    </script>
    </head>
    <body class="padded-zero">
        <!-- The element that will contain our Google Map. This is used in both the Javascript and CSS above. -->
        <div id="map"></div>
    </body>
</html>
